#!/bin/csh -f

set lib = `mirfind X11`
set inc = `mirfind -i X11`

cc -I$inc -I$inc/X11 -L$lib \
   -o xmtv.exe xmtv.c colors.c comm.c cursor.c image.c \
   local.c menus.c process.c screen.c selectpt.c widgets.c \
   -lXaw -lXmu -lXext -lXt -lX11 -lm -lsocket

# Generate a statically linked version of xmtv, for export to those sites
# which do not have X11r5 and/or Athena Widgets

cc -I$inc -L$lib \
  -o xmtv.exe.static xmtv.o colors.o comm.o cursor.o \
  image.o local.o menus.o process.o screen.o selectpt.o widgets.o \
  -Bstatic -lXaw  -lXmu -lXext -lm  -Bdynamic -lXt  -lX11 -lsocket -ldl

if ( -e xmtv.exe ) then
  mv xmtv.exe $MIRBIN/xmtv.exe
  rm *.o
else
  echo "### Failed to build xmtv"
endif
cp XMtv.ad $MIRCAT/XMtv
cp xmtv.csh $MIRBIN/xmtv
chmod +x $MIRBIN/xmtv
cp xmtv.doc $MIR/specdoc
cp xmtv.doc $MIR/doc 

