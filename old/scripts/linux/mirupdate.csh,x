#!/bin/csh -ef

# Some convenient aliases.

alias dosubs    newer -x junk			-e $MIRBIN/mircadd $MIRLIB/Last_update
alias doprog    newer -x junk 			-e $MIRBIN/mirclnk $MIRLIB/Last_update
alias doscripts newer -x junk -x mirupdate -x mirclnk -e $MIRBIN/mirclnk $MIRLIB/Last_update
alias dotools   newer -x junk -x newer 		-e $MIRBIN/mirclnk $MIRLIB/Last_update
alias dodoc     newer -x junk 			-e $MIRBIN/mirclnk $MIRLIB/Last_update

# Do the real work.

doscripts $MIR/scripts/unix{/linux,}
dodoc     $MIR/specdoc
dotools   $MIR/tools
dosubs    $MIR/subs{/unix/alpha_linux,/unix,} $MIR/linpack
doprog    $MIR/prog

# Write out the update time.

echo -n "Record the update time? [y/n] "
set update = $<
if ( "$update" == y ) then
  echo Last updated at `date` by `whoami` >> $MIRLIB/Last_update
  touch $MIRLIB/Last_update
endif
